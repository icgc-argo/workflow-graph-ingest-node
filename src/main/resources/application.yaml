server:
  port : 8082

management:
  endpoints.web.exposure.include: health
  health.binders.enabled: true

spring:
  # Rabbitmq config
  rabbitmq:
    host: localhost
    port: 5672
    username: user
    password: pass

  # Kafka broker config
  cloud.stream.kafka.binder.brokers: localhost:9092

  # cloud stream config
  cloud.stream:
    function:
      definition: publishToGraphEvent|addAvroContentType # function composition, analogous to pipe operator
      bindings:
        publishToGraphEvent|addAvroContentType-in-0: inbound
        publishToGraphEvent|addAvroContentType-out-0: outbound
    bindings:
      inbound:
        group: publish
        destination: published # kafka topic to listen to
        binder: kafka
      outbound:
        destination: start # rabbitmq exchange/topic to send messages to
        binder: rabbit
    rabbit.bindings.outbound.producer.exchangeType: fanout
    kafka.bindings.inbound.consumer:
      enableDlq: true
      dlqName: ingest-published-dlq

rdpc:
  url: "http://localhost:8000"
